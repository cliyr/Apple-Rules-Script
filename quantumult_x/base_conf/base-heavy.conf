# base heavy conf
# æœ¬é…ç½®ï¼Œä»¥å°½å¯èƒ½å¤§è€Œå…¨ä¸ºä¸»ï¼Œä½†ä¸ºè‡ªç”¨

# general æ¨¡å—å†…ä¸ºä¸€äº›é€šç”¨çš„è®¾ç½®å‚æ•°é¡¹
[general]

# Quantumult X ä¼šå¯¹ server_check_url æŒ‡å®šçš„ç½‘å€è¿›è¡Œç›¸åº”æµ‹è¯•ï¼Œä»¥ç¡®è®¤èŠ‚ç‚¹çš„å¯ç”¨æ€§
# ä½ åŒæ ·å¯ä»¥åœ¨ server_local/remote ä¸­ï¼Œä¸ºèŠ‚ç‚¹ã€è®¢é˜…å•ç‹¬æŒ‡å®š server_check_url å‚æ•°
server_check_url = http://www.qualcomm.cn/generate_204
# èŠ‚ç‚¹å»¶è¿Ÿæµ‹è¯•è¶…æ—¶å‚æ•°ï¼Œéœ€å°äº 5000 æ¯«ç§’æ‰ç”Ÿæ•ˆ
server_check_timeout = 2000

# èµ„æºè§£æå™¨ï¼Œå¯ç”¨äºè‡ªå®šä¹‰å„ç±»è¿œç¨‹èµ„æºçš„è½¬æ¢ï¼Œå¦‚èŠ‚ç‚¹ï¼Œè§„åˆ™ filterï¼Œå¤å†™ rewrite ç­‰ï¼Œurl åœ°å€å¯è¿œç¨‹ï¼Œå¯æœ¬åœ°/iCloud(Quantumult X/Scriptsç›®å½•);
# å…·ä½“å†…å®¹ç›´æ¥å‚ç…§é“¾æ¥é‡Œçš„ä½¿ç”¨è¯´æ˜
resource_parser_url = https://fastly.jsdelivr.net/gh/KOP-XIAO/QuantumultX@master/Scripts/resource-parser.js

# geo_location_checker ç”¨äºèŠ‚ç‚¹é¡µé¢çš„èŠ‚ç‚¹ä¿¡æ¯å±•ç¤ºï¼Œå¯å®Œæ•´è‡ªå®šä¹‰å±•ç¤ºå†…å®¹ä¸æ–¹å¼
geo_location_checker=http://ip-api.com/json/?lang=zh-CN, https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/IP_API.js

# è¿è¡Œæ¨¡å¼æ¨¡å—ï¼Œrunning_mode_trigger è®¾ç½®ï¼Œå³æ ¹æ®ç½‘ç»œè‡ªåŠ¨åˆ‡æ¢ åˆ†æµ/ç›´è¿/å…¨å±€ä»£ç† ç­‰æ¨¡å¼ã€‚
# running-mode-trigger æ¨¡å¼ä¸‹ï¼Œè·Ÿæ‰‹åŠ¨åˆ‡æ¢ç›´è¿/å…¨å±€ä»£ç† ç­‰æ•ˆï¼Œrewrite/task æ¨¡å—å§‹ç»ˆä¼šç”Ÿæ•ˆï¼Œæ¯” ssid ç­–ç•¥ç»„è®¾ç½®ç®€å•ï¼Œæ¯” ssid-suspend æ›´çµæ´»ã€‚
running_mode_trigger = filter, filter, HedyLamarr:all_direct
# ä¸Šè¿°å†™æ³•ï¼Œå‰ä¸¤ä¸ª filter å…ˆåè¡¨ç¤º åœ¨ [æ•°æ®èœ‚çªç½‘ç»œ] è·Ÿ [ä¸€èˆ¬ Wi-Fi] ä¸‹ï¼Œèµ° filter(åˆ†æµ) æ¨¡å¼ï¼Œåé¢åˆ™è¡¨ç¤ºåœ¨ asus-5g ä¸‹åˆ‡æ¢ä¸ºå…¨å±€ç›´è¿ [all_direct]ï¼Œasus åˆ‡æ¢ä¸ºå…¨å±€ä»£ç† [all_proxy]
# å¦‚éœ€ä½¿ç”¨ï¼Œç›¸åº” SSID æ¢æˆä½ è‡ªå·± Wi-Fi åå³å¯


[dns]
# ç¦ç”¨ç³»ç»Ÿ DNSï¼ˆno-systemï¼‰ä»¥åŠ ipv6
no-system
no-ipv6
# æ”¯æŒå‚æ•° excluded_ssids , included_ssids(1.0.29+) æŒ‡å®šåœ¨ç‰¹å®š Wi-Fiä¸‹å¤±æ•ˆ/ç”Ÿæ•ˆ

# è…¾è®¯ DoHï¼Œé˜¿é‡Œ DoH
doh-server = https://doh.pub/dns-query, https://dns.alidns.com/dns-query, excluded_ssids = HedyLamarr

[policy]
# ä»¥ä¸‹ä¸ºç­–ç•¥ç»„ [policy] éƒ¨åˆ†
# static ç­–ç•¥ç»„ä¸­ï¼Œä½ éœ€è¦æ‰‹åŠ¨é€‰æ‹©æƒ³è¦çš„èŠ‚ç‚¹/ç­–ç•¥ç»„
# available ç­–ç•¥ç»„å°†æŒ‰é¡ºåºé€‰æ‹©ä½ åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªå¯ç”¨çš„èŠ‚ç‚¹
# round-robin ç­–ç•¥ç»„ï¼Œå°†æŒ‰åˆ—è¡¨çš„é¡ºåºè½®æµä½¿ç”¨å…¶ä¸­çš„èŠ‚ç‚¹
# url-latency-benchmark å»¶è¿Ÿç­–ç•¥ç»„ï¼Œé€‰å–å»¶è¿Ÿæœ€ä¼˜èŠ‚ç‚¹
# dest-hash ç­–ç•¥ç»„ï¼Œéšæœºè´Ÿè½½å‡è¡¡ï¼Œä½†ç›¸åŒåŸŸåèµ°å›ºå®šèŠ‚ç‚¹
# ssid ç­–ç•¥ç»„ï¼Œå°†æ ¹æ®ä½ æ‰€è®¾å®šçš„ç½‘ç»œæ¥è‡ªåŠ¨åˆ‡æ¢èŠ‚ç‚¹/ç­–ç•¥ç»„
## img-url å‚æ•°ç”¨äºæŒ‡å®šç­–ç•¥ç»„å›¾æ ‡ï¼Œå¯è¿œç¨‹ï¼Œä¹Ÿå¯æœ¬åœ°/iCloud(Quantumult X/Imagesè·¯å¾„ä¸‹) ï¼ˆ108*108 å¤§å°ï¼‰
## direct/proxy/reject åˆ™åªèƒ½ç”¨æœ¬åœ°å›¾æ ‡ï¼Œåå­—åˆ†åˆ«ä¸º direct.png, proxy.png,reject.png æ”¾ç½®äº Images æ–‡ä»¶å¤¹ä¸‹å³å¯ç”Ÿæ•ˆ (108*108 å¤§å°)

static = Server Strategy, Auto Select, Country, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/Server.png?raw=true

url-latency-benchmark = Auto Select, server-tag-regex = ^(?!.*æ¸¸æˆ), check-interval = 600, tolerance = 0, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/Auto.png?raw=true

static = Country, Hong Kong, Tai Wan, Japan, America, Other, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/World_Map.png?raw=true

static = Global Proxy, Server Strategy, Direct, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/Global.png?raw=true
static = Global Direct, Direct, Server Strategy, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/China_Map.png?raw=true
static = Final, Direct, Server Strategy, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/Final.png?raw=true
static = Apple, Direct, Server Strategy, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/Apple.png?raw=true
static = Microsoft, Direct, Server Strategy, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/Microsoft.png?raw=true
static = AD Block, reject, img-url = https://raw.githubusercontent.com/erdongchanyo/icon/main/Policy-Filter/AdBlock.png

# å…·ä½“çš„å›½å®¶åˆ†ç»„
static = Hong Kong, server-tag-regex = æ¸¯|é¦™æ¸¯|ğŸ‡­ğŸ‡°|HK|hk, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/Hong_Kong.png?raw=true
static = Tai Wan, server-tag-regex = å°|å°ç£|ğŸ‡¹ğŸ‡¼|TW|tw, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/Taiwan.png?raw=true
static = Japan, server-tag-regex = æ—¥|æ—¥æœ¬|ğŸ‡¯ğŸ‡µ|JP|jp, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/Japan.png?raw=true
static = America, server-tag-regex = ç¾|ç¾å›½|ğŸ‡ºğŸ‡¸|US|us, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/United_States.png?raw=true
static = Other, server-tag-regex = ^(?!.*(ç¾|ç¾å›½|ğŸ‡ºğŸ‡¸|US|us|æ¸¯|é¦™æ¸¯|ğŸ‡­ğŸ‡°|HK|hk|æ—¥|æ—¥æœ¬|ä¸œäº¬|ğŸ‡¯ğŸ‡µ|JP|jp|å°|å°æ¹¾|TW|tw|æ–°|æ–°åŠ å¡|ç‹®åŸ|ğŸ‡¸ğŸ‡¬|SG|sg)).*, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/World_Map.png?raw=true


[filter_remote]
# è§„åˆ™åˆ†æµè¿œç¨‹è®¢é˜…
# è¿œç¨‹åˆ†æµæ¨¡å—ï¼Œå¯ä½¿ç”¨ force-policy æ¥å¼ºåˆ¶ä½¿ç”¨ç­–ç•¥åå¥½ï¼Œæ›¿æ¢è¿œç¨‹è§„åˆ™å†…æ‰€æŒ‡å®šçš„ç­–ç•¥ç»„
# åŒæ ·çš„
# update-interval ä¸ºæ›´æ–°æ—¶é—´å‚æ•°ï¼Œå•ä½ ç§’ï¼Œé»˜è®¤æ›´æ–°æ—¶é—´ä¸º 24*60*60 = 86400 ç§’ï¼Œä¹Ÿå°±æ˜¯ 24 å°æ—¶
# opt-parser = true/false ç”¨äºæ§åˆ¶æ˜¯å¦å¯¹æœ¬è®¢é˜… å¼€å¯èµ„æºè§£æå™¨ï¼Œä¸å†™æˆ–è€… false è¡¨ç¤ºä¸å¯ç”¨è§£æå™¨

# å…¨çƒä»£ç†æ€»è§„åˆ™ï¼Œä¸åŒ…å«ï¼šæ— æ³•è®¿é—®çš„åŸŸåï¼Œæ’é™¤å¹¿å‘Šã€è‹¹æœã€å¾®è½¯å’Œè°·æ­Œçš„è§„åˆ™
https://github.com/blackmatrix7/ios_rule_script/blob/master/rule/QuantumultX/ProxyLite/ProxyLite.list?raw=true, tag = Global Proxy, force-policy = Global Proxy, update-interval = 172800, opt-parser = false, enabled = true
# è¿½åŠ  Google å’Œ YouTube çš„è§„åˆ™
https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/QuantumultX/Google/Google.list?raw=trueï¼Œ tag = Google, force-policy = Global Proxy, update-interval = 172800, opt-parser = false, enabled = true
https://github.com/blackmatrix7/ios_rule_script/blob/master/rule/QuantumultX/YouTube/YouTube.list?raw=true, tag = YouTube, force-policy = Global Proxy, update-interval = 172800, opt-parser = false, enabled = true

# Apple è§„åˆ™
https://github.com/blackmatrix7/ios_rule_script/blob/master/rule/QuantumultX/Apple/Apple.list?raw=true, tag = Apple, force-policy = Apple, update-interval = 172800, opt-parser = false, enabled = true
# Microsoft è§„åˆ™
https://github.com/blackmatrix7/ios_rule_script/blob/master/rule/QuantumultX/Microsoft/Microsoft.list?raw=true, tag = Microsoft, force-policy = Microsoft, update-interval = 172800, opt-parser = false, enabled = true

# ç›´è¿æ€»è§„åˆ™ï¼Œç›´è¿ï¼ŒæŒ‡ä¸åº”è¯¥è¢«å»å¹¿å‘Šåˆ†æµè§„åˆ™å±è”½çš„åŸŸåã€IP ç­‰ï¼Œè¯·å°†æ­¤åˆ†æµè§„åˆ™ç½®äºå»å¹¿å‘Šè§„åˆ™ä¹‹å‰
https://github.com/blackmatrix7/ios_rule_script/blob/master/rule/QuantumultX/Direct/Direct.list?raw=true, tag = Global Direct, force-policy = Global Direct, update-interval = 172800, opt-parser = false, enabled = true

# å»å¹¿å‘Šæ€»è§„åˆ™ï¼Œå»å¹¿å‘Šï¼ŒæŒ‡åº”è¯¥è¢«åˆ†æµè§„åˆ™å±è”½çš„åŸŸåã€IP ç­‰ï¼Œè¯·å°†æ­¤åˆ†æµè§„åˆ™ç½®äºç›´è¿è§„åˆ™ä¹‹å
https://github.com/blackmatrix7/ios_rule_script/blob/master/rule/QuantumultX/AdvertisingLite/AdvertisingLite.list?raw=true, tag = AdvertisingLite, force-policy = AD Block, update-interval = 172800, opt-parser = false, enabled = true

[filter_local]
# æœ¬åœ°åˆ†æµè§„åˆ™ (å¯¹äºå®Œå…¨ç›¸åŒçš„æŸæ¡è§„åˆ™ï¼Œæœ¬åœ°çš„å°†ä¼˜å…ˆç”Ÿæ•ˆ)

# user-agent, ?abc*, proxy
# host, www.google.com, proxy
# host-keyword, adsite, reject
# host-suffix, googleapis.com, proxy

ip-cidr, 10.0.0.0/8, direct
ip-cidr, 127.0.0.0/8, direct
ip-cidr, 172.16.0.0/12, direct
ip-cidr, 192.168.0.0/16, direct
# è‹¥æ˜¯è¿œç¨‹åˆ†æµè§„åˆ™é‡Œä½¿ç”¨äº†å›½å†… ip åˆ—è¡¨ï¼Œé‚£ä¹ˆå°±æ²¡å¿…è¦ä½¿ç”¨ geoip åˆ†æµè§„åˆ™
geoip, cn, direct
final, Final


[rewrite_remote]
# è¿œç¨‹é‡å†™è®¢é˜…
# åŒ…å«ä¸»æœºå hostname ä»¥åŠå¤å†™ rewrite è§„åˆ™
# update-interval ä¸ºæ›´æ–°æ—¶é—´å‚æ•°ï¼Œå•ä½ï¼šç§’ï¼Œé»˜è®¤æ›´æ–°æ—¶é—´ä¸ºï¼š24 * 60 * 60 = 172800 ç§’ï¼Œä¹Ÿå°±æ˜¯ 24 å°æ—¶
# opt-parser = true/false ç”¨äºæ§åˆ¶æ˜¯å¦å¯¹è®¢é˜…å¼€å¯èµ„æºè§£æå™¨ï¼Œä¸å†™æˆ–è€… false è¡¨ç¤ºä¸å¯ç”¨è§£æå™¨

# default rewrite
https://github.com/DivineEngine/Profiles/blob/master/Quantumult/Rewrite/General.conf?raw=true, tag = ç¥æœºé‡å®šå‘, update-interval = 172800, opt-parser = false, enabled = true
https://github.com/NobyDa/Script/blob/master/QuantumultX/TestFlightDownload.conf?raw=true, tag = TestFlight è§£é™¤é™åˆ¶, update-interval = 172800, opt-parser = false, enabled = true
# å»å¹¿å‘Š
https://github.com/QuentinHsu/Apple-Rules-Script/blob/main/quantumult_x/rewrite/tianfutong.conf?raw=true, tag = AD-å¤©åºœé€š, update-interval = 172800, opt-parser = false, enabled = true
https://github.com/QuentinHsu/Apple-Rules-Script/blob/main/quantumult_x/rewrite/mijia.conf?raw=true, tag = AD-ç±³å®¶, update-interval = 172800, opt-parser = false, enabled = true
https://github.com/blackmatrix7/ios_rule_script/blob/master/rewrite/QuantumultX/AdvertisingLite/AdvertisingLite.conf?raw=true, tag = å»å¹¿å‘Š-ä¸¥æ ¼ç‰ˆ, update-interval = 172800, opt-parser = false, enabled = true
# ç‰¹å®š App çš„ç‰¹å®šé‡å†™
https://github.com/blackmatrix7/ios_rule_script/blob/master/script/zhihu/zhihu_plus.qxrewrite?raw=true, tag = çŸ¥ä¹ç³»åˆ—, update-interval = 172800, opt-parser = false, enabled= true
https://github.com/QuentinHsu/Apple-Rules-Script/blob/main/quantumult_x/rewrite/jd.conf?raw=true, tag=äº¬ä¸œç³»åˆ—, update-interval=172800, opt-parser=false, enabled=true
# å·¥å…·
https://github.com/chavyleung/scripts/blob/master/box/rewrite/boxjs.rewrite.quanx.conf?raw=true, tag = BoxJS, update-interval = 172800, opt-parser = false, enabled = true